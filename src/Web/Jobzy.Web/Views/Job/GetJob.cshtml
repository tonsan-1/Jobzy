@using Jobzy.Web.ViewModels.Jobs
@using Microsoft.AspNetCore.Identity
@using Jobzy.Data.Models
@inject UserManager<ApplicationUser> userManager

@model SingleJobViewModel

@{
    var user = await userManager.GetUserAsync(User);
}

@{
    ViewData["jobId"] = Model.Id;
    ViewData["Title"] = Model.Title;
}

<!-- Titlebar
================================================== -->
<div class="single-page-header" data-background-image="/images/single-job.jpg">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="single-page-header-inner">
                    <div class="left-side">
                        <div class="header-image"><a href="single-company-profile.html"><img src="/images/company-logo-03a.png" alt=""></a></div>
                        <div class="header-details">
                            <h3>@Model.Title</h3>
                            <h5>About the Employer</h5>
                            <ul>
                                <li><a href="single-company-profile.html"><i class="icon-material-outline-business"></i>@Model.EmployerName</a></li>
                                <li><div class="star-rating" data-rating="@Model.EmployerRating"></div></li>
                                <li><img class="flag" src="/images/flags/@(Model.EmployerLocation.ToString().ToLower()).svg" alt="">@Model.EmployerLocationToString</li>
                            </ul>
                        </div>
                    </div>
                    <div class="right-side">
                        <div class="salary-box">
                            <div class="salary-type">Budget</div>
                            <div class="salary-amount">$@Model.Budget</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Page Content
================================================== -->
<div class="container">
    <div class="row">

        <!-- Content -->
        <div class="col-xl-8 col-lg-8 content-right-offset">

            <div class="single-page-section">
                <h3 class="margin-bottom-25">Job Description</h3>
                <p>@Model.Description</p>
            </div>

            <div class="single-page-section">
                <h3 class="margin-bottom-25">Similar Jobs</h3>

                <!-- Listings Container -->
                <div class="listings-container grid-layout">

                    <!-- Job Listing -->
                    <a href="#" class="job-listing">

                        <!-- Job Listing Details -->
                        <div class="job-listing-details">
                            <!-- Logo -->
                            <div class="job-listing-company-logo">
                                <img src="images/company-logo-02.png" alt="">
                            </div>

                            <!-- Details -->
                            <div class="job-listing-description">
                                <h4 class="job-listing-company">Coffee</h4>
                                <h3 class="job-listing-title">Barista and Cashier</h3>
                            </div>
                        </div>

                        <!-- Job Listing Footer -->
                        <div class="job-listing-footer">
                            <ul>
                                <li><i class="icon-material-outline-location-on"></i> San Francisco</li>
                                <li><i class="icon-material-outline-business-center"></i> Full Time</li>
                                <li><i class="icon-material-outline-account-balance-wallet"></i> $35000-$38000</li>
                                <li><i class="icon-material-outline-access-time"></i> 2 days ago</li>
                            </ul>
                        </div>
                    </a>

                    <!-- Job Listing -->
                    <a href="#" class="job-listing">

                        <!-- Job Listing Details -->
                        <div class="job-listing-details">
                            <!-- Logo -->
                            <div class="job-listing-company-logo">
                                <img src="images/company-logo-03.png" alt="">
                            </div>

                            <!-- Details -->
                            <div class="job-listing-description">
                                <h4 class="job-listing-company">King <span class="verified-badge" title="Verified Employer" data-tippy-placement="top"></span></h4>
                                <h3 class="job-listing-title">Restaurant Manager</h3>
                            </div>
                        </div>

                        <!-- Job Listing Footer -->
                        <div class="job-listing-footer">
                            <ul>
                                <li><i class="icon-material-outline-location-on"></i> San Francisco</li>
                                <li><i class="icon-material-outline-business-center"></i> Full Time</li>
                                <li><i class="icon-material-outline-account-balance-wallet"></i> $35000-$38000</li>
                                <li><i class="icon-material-outline-access-time"></i> 2 days ago</li>
                            </ul>
                        </div>
                    </a>
                </div>
                <!-- Listings Container / End -->

            </div>
        </div>


        <!-- Sidebar -->
        <div class="col-xl-4 col-lg-4">
            <div class="sidebar-container">

                @if (this.User.IsInRole("Freelancer"))
                {
                    if (!Model.OffersFreelancerIds.Contains(user.Id))
                    {
                        <a href="#small-dialog" class="apply-now-button popup-with-zoom-anim">Make an Offer<i class="icon-material-outline-arrow-right-alt"></i></a>
                    }
                    else
                    {
                        <a role="button" class="apply-now-button bg-secondary text-white">Offer already sent</a>
                    }
                }

                <!-- Sidebar Widget -->
                <div class="sidebar-widget">
                    <div class="job-overview">
                        <div class="job-overview-headline">Job Summary</div>
                        <div class="job-overview-inner">
                            <ul>
                                <li>
                                    <i class="icon-material-outline-location-on"></i>
                                    <span>Employer Location</span>
                                    <h5>@Model.EmployerLocationToString</h5>
                                </li>
                                <li>
                                    <i class="icon-material-outline-business-center"></i>
                                    <span>Job Type</span>
                                    <h5>@Model.JobType</h5>
                                </li>
                                <li>
                                    <i class="icon-material-outline-local-atm"></i>
                                    <span>Budget</span>
                                    <h5>$@Model.Budget</h5>
                                </li>
                                <li>
                                    <i class="icon-material-outline-access-time"></i>
                                    <span>Date Posted</span>
                                    <h5>@Model.DateFormatted</h5>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Widget -->
                <div class="sidebar-widget">
                    <h3>Bookmark</h3>

                    <!-- Bookmark Button -->
                    <button class="bookmark-button margin-bottom-25">
                        <span class="bookmark-icon"></span>
                        <span class="bookmark-text">Bookmark</span>
                        <span class="bookmarked-text">Bookmarked</span>
                    </button>

                </div>
            </div>
        </div>
    </div>
</div>

<partial name="~/Views/Shared/ApplyFormPartial.cshtml" view-data="ViewData" />